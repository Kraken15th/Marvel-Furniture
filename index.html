<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø§Ø±ÙÙ„ Ù„Ù„Ø£Ø«Ø§Ø« | Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - Ø£Ø«Ø§Ø« Ø¹ØµØ±ÙŠ Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</title>
    <meta name="description"
        content="Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ø¹ØµØ±ÙŠ ÙÙŠ Ù…ØµØ±. ØºØ±Ù Ù†ÙˆÙ… ÙƒØ§Ù…Ù„Ø©ØŒ Ø³Ø±Ø§ÙŠØ±ØŒ Ù…Ø±Ø§ØªØ¨ØŒ ÙˆØ¯ÙˆØ§Ù„ÙŠØ¨ Ø¨Ø£Ø³Ø¹Ø§Ø± ØªÙ†Ø§ÙØ³ÙŠØ© Ù…Ø¹ Ø®ØµÙˆÙ…Ø§Øª ØªØµÙ„ Ø¥Ù„Ù‰ 10%">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Facebook Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', 'YOUR_PIXEL_ID');
        fbq('track', 'PageView');
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        teal: {
                            400: '#2DD4BF',
                            500: '#14B8A6',
                            600: '#0D9488',
                            700: '#0F766E',
                            800: '#115E59'
                        },
                        turquoise: {
                            400: '#22D3EE',
                            500: '#06B6D4',
                            600: '#0891B2'
                        },
                        lime: {
                            400: '#A3E635',
                            500: '#84CC16',
                            600: '#65A30D'
                        }
                    },
                    fontFamily: {
                        'cairo': ['Cairo', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * {
            font-family: 'Cairo', sans-serif;
        }

        .gradient-teal {
            background: linear-gradient(135deg, #0D9488 0%, #06B6D4 50%, #22D3EE 100%);
        }

        .gradient-lime {
            background: linear-gradient(135deg, #65A30D 0%, #84CC16 100%);
        }

        .gradient-bg {
            background-color: #e4e7eb;
        }

        .glass {
            backdrop-filter: blur(12px);
            background: rgba(255, 255, 255, 0.85);
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(13, 148, 136, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #0D9488 0%, #06B6D4 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(13, 148, 136, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #65A30D 0%, #84CC16 100%);
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(101, 163, 13, 0.4);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(100px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-up {
            animation: slideUp 0.4s ease-out;
        }

        .furniture-mockup {
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #0D9488, #06B6D4);
            border-radius: 4px;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body class="gradient-bg min-h-screen">
    <!-- Navbar -->
    <nav id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">
                <!-- Logo -->
                <a href="#" class="flex items-center gap-2">
                    <div class="w-10 h-10 md:w-12 md:h-12 gradient-teal rounded-xl flex items-center justify-center">
                        <img src="assets/logo.jpeg" alt="Logo" class="w-full h-full object-cover rounded-xl">
                    </div>
                    <span class="text-teal-700 font-bold text-lg md:text-xl hidden sm:block">Ù…Ø§Ø±ÙÙ„ Ù„Ù„Ø£Ø«Ø§Ø«</span>
                </a>
                <!-- Desktop Nav -->
                <div class="hidden md:flex items-center gap-6">
                    <a href="#products"
                        class="text-gray-700 hover:text-teal-600 font-semibold transition-colors">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
                    <a href="#offers"
                        class="text-gray-700 hover:text-teal-600 font-semibold transition-colors">Ø§Ù„Ø¹Ø±ÙˆØ¶</a>
                    <a href="#beds"
                        class="text-gray-700 hover:text-teal-600 font-semibold transition-colors">Ø§Ù„Ø³Ø±Ø§ÙŠØ±</a>
                    <a href="#mattresses"
                        class="text-gray-700 hover:text-teal-600 font-semibold transition-colors">Ø§Ù„Ù…Ø±Ø§ØªØ¨</a>
                </div>
                <!-- Cart Button -->
                <button id="cart-btn"
                    class="relative p-3 rounded-xl bg-white/80 hover:bg-white shadow-lg transition-all hover:scale-105">
                    <svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <span id="cart-count"
                        class="absolute -top-1 -right-1 w-5 h-5 bg-lime-500 text-white text-xs font-bold rounded-full flex items-center justify-center hidden">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="pt-24 md:pt-32 pb-12 md:pb-20 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <div class="inline-block px-4 py-2 bg-lime-100 text-lime-700 rounded-full text-sm font-bold mb-4">ğŸ‰
                    Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</div>
                <h1 class="text-3xl md:text-5xl lg:text-6xl font-extrabold text-gray-800 mb-4 leading-tight">
                    Ø£Ø«Ø§Ø« Ø¹ØµØ±ÙŠ <span
                        class="text-transparent bg-clip-text gradient-teal bg-gradient-to-r from-teal-600 to-turquoise-500">Ø¨ØªØµÙ…ÙŠÙ…Ø§Øª
                        ÙØ±ÙŠØ¯Ø©</span>
                </h1>
                <p class="text-gray-600 text-lg md:text-xl max-w-2xl mx-auto">Ø§ÙƒØªØ´Ù Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ù…Ù† Ø§Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ø¹ØµØ±ÙŠ
                    Ø¨Ø£Ø³Ø¹Ø§Ø± Ù„Ø§ ØªÙÙ‚Ø§ÙˆÙ…</p>
            </div>
            <!-- Offer Cards -->
            <div id="offers" class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                <div class="bg-white rounded-3xl p-6 md:p-8 shadow-xl card-hover border-2 border-teal-100">
                    <div class="flex items-start justify-between mb-4">
                        <div class="w-14 h-14 gradient-teal rounded-2xl flex items-center justify-center">
                            <span class="text-white text-2xl">ğŸ›ï¸</span>
                        </div>
                        <span class="px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-sm font-bold">Ø®ØµÙ… 10%</span>
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-2">Ø¹Ø±Ø¶ Ø§Ù„ØºØ±ÙØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</h3>
                    <p class="text-gray-600 mb-4">Ø³Ø±ÙŠØ± + Ù…Ø±ØªØ¨Ø© + Ø¯ÙˆÙ„Ø§Ø¨ + ÙƒÙˆÙ…ÙˆØ¯ÙŠÙ†Ùˆ</p>
                    <div class="furniture-mockup h-32 rounded-2xl mb-4 overflow-hidden">
                        <img src="assets/Bedoffer.jpeg" alt="Ø¹Ø±Ø¶ Ø§Ù„ØºØ±ÙØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©" class="w-full h-full object-cover">
                    </div>
                    <button onclick="scrollToProducts()"
                        class="w-full btn-primary text-white py-3 rounded-xl font-bold">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</button>
                </div>
                <div class="bg-white rounded-3xl p-6 md:p-8 shadow-xl card-hover border-2 border-lime-100">
                    <div class="flex items-start justify-between mb-4">
                        <div class="w-14 h-14 gradient-lime rounded-2xl flex items-center justify-center">
                            <span class="text-white text-2xl">ğŸ</span>
                        </div>
                        <span class="px-3 py-1 bg-lime-100 text-lime-700 rounded-full text-sm font-bold">Ù‡Ø¯ÙŠØ©
                            Ù…Ø¬Ø§Ù†ÙŠØ©</span>
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-2">Ø³Ø±ÙŠØ± + Ù…Ø±ØªØ¨Ø©</h3>
                    <p class="text-gray-600 mb-4">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø®Ø¯Ø© Ù…Ø¬Ø§Ù†Ø§Ù‹</p>
                    <div class="furniture-mockup h-32 rounded-2xl mb-4 overflow-hidden">
                        <img src="assets/bed1.jpeg" alt="Ø³Ø±ÙŠØ± + Ù…Ø±ØªØ¨Ø©" class="w-full h-full object-cover">
                    </div>
                    <button onclick="scrollToProducts()"
                        class="w-full btn-secondary text-white py-3 rounded-xl font-bold">Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¹Ø±Ø¶</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-12 md:py-20 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-3">Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§</h2>
                <p class="text-gray-600">Ø§Ø®ØªØ± Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø§Ù„Ù…ØªÙ†ÙˆØ¹Ø©</p>
            </div>
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Sidebar Filter -->
                <aside id="sidebar" class="lg:w-64 flex-shrink-0">
                    <div class="bg-white rounded-2xl p-6 shadow-lg sticky top-24">
                        <h3 class="font-bold text-lg text-gray-800 mb-4">Ø§Ù„ÙØ¦Ø§Øª</h3>
                        <div class="space-y-3">
                            <label class="flex items-center gap-3 cursor-pointer group">
                                <input type="checkbox"
                                    class="category-filter w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"
                                    value="all" checked>
                                <span
                                    class="text-gray-700 group-hover:text-teal-600 transition-colors font-medium">Ø§Ù„ÙƒÙ„</span>
                            </label>
                            <label class="flex items-center gap-3 cursor-pointer group">
                                <input type="checkbox"
                                    class="category-filter w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"
                                    value="beds">
                                <span
                                    class="text-gray-700 group-hover:text-teal-600 transition-colors font-medium">Ø§Ù„Ø³Ø±Ø§ÙŠØ±</span>
                            </label>
                            <label class="flex items-center gap-3 cursor-pointer group">
                                <input type="checkbox"
                                    class="category-filter w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"
                                    value="mattresses">
                                <span
                                    class="text-gray-700 group-hover:text-teal-600 transition-colors font-medium">Ø§Ù„Ù…Ø±Ø§ØªØ¨</span>
                            </label>
                            <label class="flex items-center gap-3 cursor-pointer group">
                                <input type="checkbox"
                                    class="category-filter w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"
                                    value="wardrobes">
                                <span
                                    class="text-gray-700 group-hover:text-teal-600 transition-colors font-medium">Ø§Ù„Ø¯ÙˆØ§Ù„ÙŠØ¨</span>
                            </label>
                            <label class="flex items-center gap-3 cursor-pointer group">
                                <input type="checkbox"
                                    class="category-filter w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"
                                    value="bedside">
                                <span
                                    class="text-gray-700 group-hover:text-teal-600 transition-colors font-medium">Ø§Ù„ÙƒÙˆÙ…ÙˆØ¯ÙŠÙ†Ùˆ</span>
                            </label>
                        </div>
                    </div>
                </aside>
                <!-- Products Grid -->
                <div id="products-grid" class="flex-1 grid sm:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- Products will be rendered by JS -->
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Popup -->
    <div id="cart-popup"
        class="fixed bottom-4 left-4 bg-white rounded-2xl shadow-2xl p-4 max-w-sm w-full z-50 hidden slide-up border border-teal-100">
        <div class="flex items-center justify-between mb-3">
            <h4 class="font-bold text-gray-800">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h4>
            <button onclick="closeCartPopup()" class="text-gray-400 hover:text-gray-600">âœ•</button>
        </div>
        <div id="cart-popup-items" class="max-h-40 overflow-y-auto hide-scrollbar space-y-2 mb-3"></div>
        <div class="flex items-center justify-between border-t pt-3">
            <span class="font-bold text-gray-800">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cart-popup-total">0</span> Ø¬Ù†ÙŠÙ‡</span>
            <button onclick="openCartPage()" class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-bold">Ø¹Ø±Ø¶
                Ø§Ù„Ø³Ù„Ø©</button>
        </div>
    </div>

    <!-- Cart Page Modal -->
    <div id="cart-page" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="absolute inset-0 md:inset-4 lg:inset-10 bg-white md:rounded-3xl overflow-auto">
            <div class="max-w-4xl mx-auto p-6 md:p-10">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
                    <button onclick="closeCartPage()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div id="cart-items" class="space-y-4 mb-8"></div>
                <div id="cart-empty" class="text-center py-10 hidden">
                    <div class="text-6xl mb-4">ğŸ›’</div>
                    <p class="text-gray-500 text-lg">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>
                </div>
                <!-- Upselling Section -->
                <div id="upselling" class="mb-8 hidden">
                    <h3 class="font-bold text-xl text-gray-800 mb-4">ğŸ’¡ Ù‚Ø¯ ÙŠØ¹Ø¬Ø¨Ùƒ Ø£ÙŠØ¶Ø§Ù‹</h3>
                    <div id="upselling-grid" class="grid sm:grid-cols-2 gap-4"></div>
                </div>
                <!-- Shipping -->
                <div id="shipping-section" class="bg-gray-50 rounded-2xl p-6 mb-6">
                    <h3 class="font-bold text-lg mb-4">ğŸšš Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„</h3>
                    <select id="shipping-select"
                        class="w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
                        <option value="200" data-city="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© - 200 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="200" data-city="Ø§Ù„Ø¬ÙŠØ²Ø©">Ø§Ù„Ø¬ÙŠØ²Ø© - 200 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="300" data-city="Ø­Ù„ÙˆØ§Ù†">Ø­Ù„ÙˆØ§Ù† - 300 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="300" data-city="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - 300 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="300" data-city="Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©">Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© - 300 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="350" data-city="Ø§Ù„ÙÙŠÙˆÙ…">Ø§Ù„ÙÙŠÙˆÙ… - 350 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="350" data-city="Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©">Ø§Ù„Ù…Ù†ÙˆÙÙŠØ© - 350 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="350" data-city="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø§Ù„Ø´Ø±Ù‚ÙŠØ© - 350 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="350" data-city="Ø§Ù„ØºØ±Ø¨ÙŠØ©">Ø§Ù„ØºØ±Ø¨ÙŠØ© - 350 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="600" data-city="Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©">Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© - 600 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="600" data-city="Ø§Ù„Ø³ÙˆÙŠØ³">Ø§Ù„Ø³ÙˆÙŠØ³ - 600 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="600" data-city="Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ø³Ø®Ù†Ø©">Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ø³Ø®Ù†Ø© - 600 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="900" data-city="Ø§Ù„Ø³Ø§Ø­Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ">Ø§Ù„Ø³Ø§Ø­Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ - 900 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="1500" data-city="Ø§Ù„ØºØ±Ø¯Ù‚Ø©">Ø§Ù„ØºØ±Ø¯Ù‚Ø© - 1500 Ø¬Ù†ÙŠÙ‡</option>
                        <option value="1500" data-city="Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­">Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­ - 1500 Ø¬Ù†ÙŠÙ‡</option>
                    </select>
                </div>
                <!-- Totals -->
                <div class="bg-teal-50 rounded-2xl p-6 mb-6">
                    <div class="flex justify-between mb-2"><span class="text-gray-600">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span><span
                            id="products-total" class="font-bold">0 Ø¬Ù†ÙŠÙ‡</span></div>
                    <div class="flex justify-between mb-2"><span class="text-gray-600">Ø§Ù„Ø´Ø­Ù†</span><span
                            id="shipping-total" class="font-bold">0 Ø¬Ù†ÙŠÙ‡</span></div>
                    <div class="flex justify-between text-xl border-t border-teal-200 pt-3 mt-3"><span
                            class="font-bold text-teal-700">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><span id="grand-total"
                            class="font-bold text-teal-700">0 Ø¬Ù†ÙŠÙ‡</span></div>
                </div>
                <button onclick="openCheckout()"
                    class="w-full btn-primary text-white py-4 rounded-xl font-bold text-lg">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-page" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="absolute inset-0 md:inset-4 lg:inset-10 bg-white md:rounded-3xl overflow-auto">
            <div class="max-w-2xl mx-auto p-6 md:p-10">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h2>
                    <button onclick="closeCheckout()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="checkout-form" class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                        <input type="text" id="fullName" required
                            class="w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ *</label>
                        <input type="tel" id="primaryPhone" required
                            class="w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200"
                            dir="ltr">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø«Ø§Ù†ÙˆÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <input type="tel" id="secondaryPhone"
                            class="w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200"
                            dir="ltr">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© *</label>
                        <select id="city" required
                            class="w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
                            <option value="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option>
                            <option value="Ø§Ù„Ø¬ÙŠØ²Ø©">Ø§Ù„Ø¬ÙŠØ²Ø©</option>
                            <option value="Ø­Ù„ÙˆØ§Ù†">Ø­Ù„ÙˆØ§Ù†</option>
                            <option value="Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</option>
                            <option value="Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©">Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</option>
                            <option value="Ø§Ù„ÙÙŠÙˆÙ…">Ø§Ù„ÙÙŠÙˆÙ…</option>
                            <option value="Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©">Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©</option>
                            <option value="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                            <option value="Ø§Ù„ØºØ±Ø¨ÙŠØ©">Ø§Ù„ØºØ±Ø¨ÙŠØ©</option>
                            <option value="Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©">Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</option>
                            <option value="Ø§Ù„Ø³ÙˆÙŠØ³">Ø§Ù„Ø³ÙˆÙŠØ³</option>
                            <option value="Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ø³Ø®Ù†Ø©">Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ø³Ø®Ù†Ø©</option>
                            <option value="Ø§Ù„Ø³Ø§Ø­Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ">Ø§Ù„Ø³Ø§Ø­Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ</option>
                            <option value="Ø§Ù„ØºØ±Ø¯Ù‚Ø©">Ø§Ù„ØºØ±Ø¯Ù‚Ø©</option>
                            <option value="Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­">Ù…Ø±Ø³Ù‰ Ù…Ø·Ø±ÙˆØ­</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ *</label>
                        <textarea id="fullAddress" required rows="3"
                            class="w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200"></textarea>
                    </div>
                    <!-- Order Summary -->
                    <div class="bg-gray-50 rounded-2xl p-4 mt-6">
                        <h4 class="font-bold mb-3">Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</h4>
                        <div id="checkout-items" class="space-y-2 text-sm"></div>
                        <div class="border-t mt-3 pt-3 space-y-1">
                            <div class="flex justify-between"><span>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span><span id="checkout-products-total">0
                                    Ø¬Ù†ÙŠÙ‡</span></div>
                            <div class="flex justify-between"><span>Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„ØªØ±ÙƒÙŠØ¨:</span><span id="checkout-shipping">0
                                    Ø¬Ù†ÙŠÙ‡</span></div>
                            <div class="flex justify-between font-bold text-lg text-teal-700">
                                <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span><span id="checkout-total">0 Ø¬Ù†ÙŠÙ‡</span>
                            </div>
                        </div>
                    </div>
                    <button type="submit"
                        class="w-full btn-primary text-white py-4 rounded-xl font-bold text-lg mt-6">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø±
                        ÙˆØ§ØªØ³Ø§Ø¨</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-10 mt-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <span
                class="inline-flex w-12 h-12 gradient-teal rounded-xl items-center justify-center mx-auto mb-4 overflow-hidden">
                <img src="assets/logo.jpeg" alt="Ù…Ø§Ø±ÙÙ„ Ù„Ù„Ø£Ø«Ø§Ø«" class="w-full h-full object-cover">
            </span>
            <p class="text-gray-400 mb-4">Ù…Ø§Ø±ÙÙ„ Ù„Ù„Ø£Ø«Ø§Ø« - Ø£Ø«Ø§Ø« Ø¹ØµØ±ÙŠ Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©</p>
            <p class="text-gray-500 text-sm">Â© 2026 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </div>
    </footer>

    <script>
        // ===================== PRODUCTS DATA =====================
        const products = [
            // Beds
            { id: 1, name: 'Ø³Ø±ÙŠØ± Ù…ÙˆØ¯Ø±Ù† 100Ã—200', category: 'beds', size: '100x200', price: 4000, hasMetalSlats: true, image: 'assets/bed100.jpeg' },
            { id: 2, name: 'Ø³Ø±ÙŠØ± Ù…ÙˆØ¯Ø±Ù† 120Ã—200', category: 'beds', size: '120x200', price: 4500, hasMetalSlats: true, image: 'assets/bed120.jpeg' },
            { id: 3, name: 'Ø³Ø±ÙŠØ± Ù…ÙˆØ¯Ø±Ù† 150Ã—200', category: 'beds', size: '150x200', price: 5200, hasMetalSlats: true, image: 'assets/bed150.jpeg' },
            { id: 4, name: 'Ø³Ø±ÙŠØ± Ù…ÙˆØ¯Ø±Ù† 160Ã—200', category: 'beds', size: '160x200', price: 5800, hasMetalSlats: true, image: 'assets/bed160.jpeg' },
            // Mattresses
            { id: 5, name: 'Ù…Ø±ØªØ¨Ø© Ø·Ø¨ÙŠØ© 100Ã—200', category: 'mattresses', size: '100x200', dimensions: '100Ã—200Ã—26 Ø³Ù…', price: 2900, image: 'assets/mattress2.jpeg' },
            { id: 6, name: 'Ù…Ø±ØªØ¨Ø© Ø·Ø¨ÙŠØ© 120Ã—200', category: 'mattresses', size: '120x200', dimensions: '120Ã—200Ã—26 Ø³Ù…', price: 3300, image: 'assets/mattress2.jpeg' },
            { id: 7, name: 'Ù…Ø±ØªØ¨Ø© Ø·Ø¨ÙŠØ© 150Ã—200', category: 'mattresses', size: '150x200', dimensions: '150Ã—200Ã—26 Ø³Ù…', price: 4150, image: 'assets/mattress2.jpeg' },
            { id: 8, name: 'Ù…Ø±ØªØ¨Ø© Ø·Ø¨ÙŠØ© 160Ã—200', category: 'mattresses', size: '160x200', dimensions: '160Ã—200Ã—26 Ø³Ù…', price: 4600, image: 'assets/mattress2.jpeg' },
            // Wardrobes
            { id: 9, name: 'Ø¯ÙˆÙ„Ø§Ø¨ Ù…Ù„Ø§Ø¨Ø³ 3 Ø¯Ø±ÙØ©', category: 'wardrobes', design: 'ÙƒÙ„Ø§Ø³ÙŠÙƒ', dimensions: '40Ã—60Ã—180 Ø³Ù…', price: 4500, image: 'assets/wardrobe3.jpeg' },
            { id: 10, name: 'Ø¯ÙˆÙ„Ø§Ø¨ Ù…Ù„Ø§Ø¨Ø³ 4 Ø¯Ø±ÙØ©', category: 'wardrobes', design: 'Ù…ÙˆØ¯Ø±Ù†', dimensions: '100Ã—40Ã—180 Ø³Ù…', price: 4900, image: 'assets/wardrobe5.jpeg' },
            { id: 11, name: 'Ø¯ÙˆÙ„Ø§Ø¨ Ù…Ù„Ø§Ø¨Ø³ 5 Ø¯Ø±ÙØ©', category: 'wardrobes', design: 'ÙØ§Ø®Ø±', dimensions: '160Ã—60Ã—200 Ø³Ù…', price: 9000, image: 'assets/wardrobe2.jpeg' },
            { id: 12, name: 'Ø¯ÙˆÙ„Ø§Ø¨ Ù…Ù„Ø§Ø¨Ø³ 6 Ø¯Ø±ÙØ©', category: 'wardrobes', design: 'Ø³ÙˆØ¨Ø±', dimensions: '190Ã—50Ã—200 Ø³Ù…', price: 8500, image: 'assets/wardrobe4.jpeg' },
            // Bedside Tables
            { id: 13, name: 'ÙƒÙˆÙ…ÙˆØ¯ÙŠÙ†Ùˆ', category: 'bedside', design: 'ÙƒÙ„Ø§Ø³ÙŠÙƒ', dimensions: '50Ã—40Ã—50 Ø³Ù…', price: 1600, image: 'assets/bedside1.jpeg' },
            { id: 14, name: 'ÙƒÙˆÙ…ÙˆØ¯ÙŠÙ†Ùˆ', category: 'bedside', design: 'Ù…ÙˆØ¯Ø±Ù†', dimensions: '45Ã—40Ã—55 Ø³Ù…', price: 1600, image: 'assets/bedside2.jpeg' }
        ];

        // ===================== CART STATE =====================
        let cart = JSON.parse(localStorage.getItem('marvelCart')) || [];
        let shippingCost = 0;

        // ===================== DOM ELEMENTS =====================
        const productsGrid = document.getElementById('products-grid');
        const cartBtn = document.getElementById('cart-btn');
        const cartCount = document.getElementById('cart-count');
        const cartPopup = document.getElementById('cart-popup');
        const cartPopupItems = document.getElementById('cart-popup-items');
        const cartPopupTotal = document.getElementById('cart-popup-total');
        const cartPage = document.getElementById('cart-page');
        const cartItems = document.getElementById('cart-items');
        const cartEmpty = document.getElementById('cart-empty');
        const shippingSelect = document.getElementById('shipping-select');
        const checkoutPage = document.getElementById('checkout-page');
        const checkoutForm = document.getElementById('checkout-form');
        const navbar = document.getElementById('navbar');

        // ===================== INITIALIZE =====================
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            updateCartUI();
            setupFilters();
            setupNavbarScroll();
        });

        // ===================== NAVBAR SCROLL =====================
        function setupNavbarScroll() {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('glass', 'shadow-lg');
                } else {
                    navbar.classList.remove('glass', 'shadow-lg');
                }
            });
        }

        // ===================== RENDER PRODUCTS =====================
        function renderProducts(filter = 'all') {
            const filtered = filter === 'all' ? products : products.filter(p => p.category === filter);
            productsGrid.innerHTML = filtered.map(p => `
                <div class="bg-white rounded-2xl overflow-hidden shadow-lg card-hover fade-in" data-category="${p.category}">
                    <div class="aspect-square bg-gray-100 relative overflow-hidden">
                        <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-teal-100 to-turquoise-100 hidden">
                            <span class="text-teal-600 text-4xl">${getCategoryIcon(p.category)}</span>
                        </div>
                    </div>
                    <div class="p-5">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="font-bold text-lg text-gray-800">${p.name}</h3>
                            <span class="px-2 py-1 bg-teal-100 text-teal-700 text-xs rounded-full">${p.size || p.design}</span>
                        </div>
                        <p class="text-gray-500 text-sm mb-3">${p.dimensions}</p>
                        ${p.hasMetalSlats ? `
                        <label class="flex items-center gap-2 mb-3 cursor-pointer">
                            <input type="checkbox" class="metal-slats-toggle w-4 h-4 rounded text-lime-600" data-id="${p.id}">
                            <span class="text-sm text-gray-600">Ø´Ø±Ø§Ø¦Ø­ Ù…Ø¹Ø¯Ù†ÙŠØ© (+500 Ø¬Ù†ÙŠÙ‡)</span>
                        </label>` : ''}
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-teal-600" id="price-${p.id}">${p.price.toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡</span>
                            <button onclick="addToCart(${p.id})" class="btn-primary text-white px-4 py-2 rounded-xl text-sm font-bold">
                                Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            // Add event listeners for metal slats toggles
            document.querySelectorAll('.metal-slats-toggle').forEach(toggle => {
                toggle.addEventListener('change', (e) => {
                    const id = parseInt(e.target.dataset.id);
                    const product = products.find(p => p.id === id);
                    const priceEl = document.getElementById(`price-${id}`);
                    const newPrice = e.target.checked ? product.price + 500 : product.price;
                    priceEl.textContent = newPrice.toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
                });
            });
        }

        function getCategoryIcon(category) {
            const icons = { beds: 'ğŸ›ï¸', mattresses: 'ğŸ›‹ï¸', wardrobes: 'ğŸšª', bedside: 'ğŸª‘' };
            return icons[category] || 'ğŸ“¦';
        }

        // ===================== FILTERS =====================
        function setupFilters() {
            document.querySelectorAll('.category-filter').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    if (e.target.value === 'all' && e.target.checked) {
                        document.querySelectorAll('.category-filter').forEach(cb => {
                            if (cb.value !== 'all') cb.checked = false;
                        });
                        renderProducts('all');
                    } else {
                        document.querySelector('.category-filter[value="all"]').checked = false;
                        const checked = [...document.querySelectorAll('.category-filter:checked')].map(cb => cb.value).filter(v => v !== 'all');
                        if (checked.length === 0) {
                            document.querySelector('.category-filter[value="all"]').checked = true;
                            renderProducts('all');
                        } else {
                            renderProducts(checked.length === 1 ? checked[0] : 'all');
                        }
                    }
                });
            });
        }

        // ===================== CART FUNCTIONS =====================
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const metalSlatsToggle = document.querySelector(`.metal-slats-toggle[data-id="${productId}"]`);
            const hasMetalSlats = metalSlatsToggle ? metalSlatsToggle.checked : false;
            const finalPrice = hasMetalSlats ? product.price + 500 : product.price;

            const existingItem = cart.find(item => item.id === productId && item.metalSlats === hasMetalSlats);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, price: finalPrice, metalSlats: hasMetalSlats, quantity: 1 });
            }

            saveCart();
            updateCartUI();
            showCartPopup();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
            updateCartUI();
            renderCartPage();
        }

        function updateQuantity(index, delta) {
            cart[index].quantity += delta;
            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            saveCart();
            updateCartUI();
            renderCartPage();
        }

        function saveCart() {
            localStorage.setItem('marvelCart', JSON.stringify(cart));
        }

        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            cartCount.classList.toggle('hidden', totalItems === 0);

            const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            cartPopupTotal.textContent = total.toLocaleString('ar-EG');

            cartPopupItems.innerHTML = cart.slice(0, 3).map(item => `
                <div class="flex justify-between text-sm">
                    <span>${item.name} ${item.size || item.design} x${item.quantity}</span>
                    <span class="font-bold">${(item.price * item.quantity).toLocaleString('ar-EG')}</span>
                </div>
            `).join('');

            if (cart.length > 3) {
                cartPopupItems.innerHTML += `<p class="text-xs text-gray-500">+${cart.length - 3} Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰</p>`;
            }
        }

        function showCartPopup() {
            cartPopup.classList.remove('hidden');
            setTimeout(() => cartPopup.classList.add('hidden'), 4000);
        }

        function closeCartPopup() {
            cartPopup.classList.add('hidden');
        }

        // ===================== CART PAGE =====================
        cartBtn.addEventListener('click', openCartPage);

        function openCartPage() {
            cartPage.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            renderCartPage();
        }

        function closeCartPage() {
            cartPage.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function renderCartPage() {
            if (cart.length === 0) {
                cartItems.classList.add('hidden');
                cartEmpty.classList.remove('hidden');
                document.getElementById('shipping-section').classList.add('hidden');
                document.getElementById('upselling').classList.add('hidden');
            } else {
                cartItems.classList.remove('hidden');
                cartEmpty.classList.add('hidden');
                document.getElementById('shipping-section').classList.remove('hidden');

                cartItems.innerHTML = cart.map((item, index) => `
                    <div class="flex items-center gap-4 bg-gray-50 rounded-xl p-4">
                        <div class="w-20 h-20 bg-gradient-to-br from-teal-100 to-turquoise-100 rounded-xl flex items-center justify-center">
                            <span class="text-2xl">${getCategoryIcon(item.category)}</span>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800">${item.name} - ${item.size || item.design}</h4>
                            <p class="text-sm text-gray-500">${item.dimensions}</p>
                            ${item.metalSlats ? '<span class="text-xs text-lime-600">+ Ø´Ø±Ø§Ø¦Ø­ Ù…Ø¹Ø¯Ù†ÙŠØ©</span>' : ''}
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="updateQuantity(${index}, -1)" class="w-8 h-8 rounded-lg bg-gray-200 hover:bg-gray-300 font-bold">-</button>
                            <span class="w-8 text-center font-bold">${item.quantity}</span>
                            <button onclick="updateQuantity(${index}, 1)" class="w-8 h-8 rounded-lg bg-gray-200 hover:bg-gray-300 font-bold">+</button>
                        </div>
                        <span class="font-bold text-teal-600 min-w-[100px] text-left">${(item.price * item.quantity).toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡</span>
                        <button onclick="removeFromCart(${index})" class="text-red-500 hover:text-red-700 p-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                        </button>
                    </div>
                `).join('');

                // Upselling
                const cartCategories = [...new Set(cart.map(item => item.category))];
                const allCategories = ['beds', 'mattresses', 'wardrobes', 'bedside'];
                const missingCategories = allCategories.filter(c => !cartCategories.includes(c));

                if (missingCategories.length > 0) {
                    document.getElementById('upselling').classList.remove('hidden');
                    const upsellProducts = products.filter(p => missingCategories.includes(p.category)).slice(0, 4);
                    document.getElementById('upselling-grid').innerHTML = upsellProducts.map(p => `
                        <div class="flex items-center gap-3 bg-white rounded-xl p-3 border border-gray-100">
                            <div class="w-12 h-12 bg-gradient-to-br from-teal-100 to-turquoise-100 rounded-lg flex items-center justify-center">
                                <span>${getCategoryIcon(p.category)}</span>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-sm">${p.name}</p>
                                <p class="text-teal-600 text-sm font-bold">${p.price.toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡</p>
                            </div>
                            <button onclick="addToCart(${p.id})" class="btn-secondary text-white px-3 py-1 rounded-lg text-xs">Ø£Ø¶Ù</button>
                        </div>
                    `).join('');
                } else {
                    document.getElementById('upselling').classList.add('hidden');
                }
            }

            updateTotals();
        }

        shippingSelect.addEventListener('change', (e) => {
            shippingCost = parseInt(e.target.value) || 0;
            // Store selected city name from shipping dropdown
            const selectedOption = e.target.options[e.target.selectedIndex];
            window.selectedCity = selectedOption.dataset.city || '';
            updateTotals();
        });

        function updateTotals() {
            const productsTotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            document.getElementById('products-total').textContent = productsTotal.toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
            document.getElementById('shipping-total').textContent = shippingCost.toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
            document.getElementById('grand-total').textContent = (productsTotal + shippingCost).toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
        }

        // ===================== CHECKOUT =====================
        function openCheckout() {
            if (cart.length === 0) return;
            if (!shippingSelect.value) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„');
                return;
            }
            closeCartPage();
            checkoutPage.classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            // Pre-select city in checkout based on shipping selection
            const citySelect = document.getElementById('city');
            if (window.selectedCity && citySelect) {
                citySelect.value = window.selectedCity;
            }

            renderCheckoutSummary();
        }

        function closeCheckout() {
            checkoutPage.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function renderCheckoutSummary() {
            const productsTotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            document.getElementById('checkout-items').innerHTML = cart.map(item => `
                <div class="flex justify-between">
                    <span>${item.name} ${item.size || item.design} x${item.quantity}</span>
                    <span>${(item.price * item.quantity).toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡</span>
                </div>
            `).join('');
            document.getElementById('checkout-products-total').textContent = productsTotal.toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
            document.getElementById('checkout-shipping').textContent = shippingCost.toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
            document.getElementById('checkout-total').textContent = (productsTotal + shippingCost).toLocaleString('ar-EG') + ' Ø¬Ù†ÙŠÙ‡';
        }

        checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const fullName = document.getElementById('fullName').value;
            const primaryPhone = document.getElementById('primaryPhone').value;
            const secondaryPhone = document.getElementById('secondaryPhone').value;
            const city = document.getElementById('city').value;
            const fullAddress = document.getElementById('fullAddress').value;

            const productsPrice = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const totalPrice = productsPrice + shippingCost;
            const numProducts = cart.reduce((sum, item) => sum + item.quantity, 0);
            const selectedCategories = [...new Set(cart.map(item => item.name + ' ' + (item.size || item.design)))];

            // Facebook Pixel - InitiateCheckout
            if (typeof fbq !== 'undefined') {
                fbq('track', 'InitiateCheckout', {
                    content_name: selectedCategories.join(', '),
                    content_category: 'furniture',
                    value: totalPrice,
                    currency: 'EGP',
                    num_items: numProducts
                });
            }

            // Build WhatsApp Message
            let message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡ \n\n`;
            message += `ğŸ›’ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯*\n`;
            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;

            cart.forEach((item, index) => {
                message += `ğŸ“¦ *Ø§Ù„Ù…Ù†ØªØ¬ ${index + 1}:*\n`;
                message += `â€¢ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„: ${item.name}\n`;
                message += `â€¢ Ø§Ù„Ù…Ù‚Ø§Ø³/Ø§Ù„ØªØµÙ…ÙŠÙ…: ${item.size || item.design}\n`;
                message += `â€¢ Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}\n`;
                if (item.metalSlats) message += `â€¢ Ø´Ø±Ø§Ø¦Ø­ Ù…Ø¹Ø¯Ù†ÙŠØ©: Ù†Ø¹Ù…\n`;
                message += `â€¢ Ø§Ù„Ø³Ø¹Ø±: ${(item.price * item.quantity).toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡\n\n`;
            });

            message += `ğŸ‘¤ *Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:*\n`;
            message += `â€¢ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„: ${fullName}\n`;
            message += `â€¢ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: ${primaryPhone}\n`;
            if (secondaryPhone) message += `â€¢ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø«Ø§Ù†ÙˆÙŠ: ${secondaryPhone}\n`;
            message += `â€¢ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: ${city}\n`;
            message += `â€¢ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ: ${fullAddress}\n\n`;

            message += `ğŸ’° *Ø§Ù„ÙØ§ØªÙˆØ±Ø©:*\n`;
            message += `â€¢ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${numProducts}\n`;
            message += `â€¢ Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${productsPrice.toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡\n`;
            message += `â€¢ Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù†: ${shippingCost.toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡\n`;
            message += `â€¢ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalPrice.toLocaleString('ar-EG')} Ø¬Ù†ÙŠÙ‡\n\n`;

            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            message += `ğŸ“… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨: ${new Date().toLocaleString('ar-EG')}\n`;
            message += `âœ¨ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… Ù…Ø§Ø±ÙÙ„ Ù„Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ø¹ØµØ±ÙŠ`;

            const whatsappUrl = `https://wa.me/201044231348?text=${encodeURIComponent(message)}`;

            // Facebook Pixel - Purchase
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Purchase', {
                    content_name: selectedCategories.join(', '),
                    content_category: 'furniture',
                    value: totalPrice,
                    currency: 'EGP',
                    num_items: numProducts
                });
            }

            // Clear cart and redirect
            cart = [];
            saveCart();
            updateCartUI();

            window.open(whatsappUrl, '_blank');
            closeCheckout();
        });

        // ===================== HELPER FUNCTIONS =====================
        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>

</html>